{"version":3,"file":"index.js","sources":["../src/utils/set.tsx","../src/middleware/applyMiddleware.ts"],"sourcesContent":["export default function set(store, ret) {\n  if (ret != null) {\n    if (ret.then) return ret.then(store.setState)\n    store.setState(ret)\n  }\n}\n","import Store from \"../interfaces/Store\"\nimport set from \"../utils/set\"\n\nconst finalMiddleware = (store: Store, args) => (action: Function) =>\n  set(store, action(store.getState(), ...args))\n\nexport default function applyMiddleware(...middlewares) {\n  return (store: Store, action: Function, args) => {\n    if (middlewares.length < 1) {\n      return set(store, action(store.getState(), ...args))\n    }\n\n    const chain = middlewares\n      .reverse()\n      .map(middleware => middleware(store))\n      .reduce(\n        (next, middleware) => middleware(next),\n        finalMiddleware(store, args)\n      )\n\n    return chain(action)\n  }\n}\n"],"names":[],"mappings":";;;;aAA4B,KAAK,EAAE,GAAG;IACpC,IAAI,GAAG,IAAI,IAAI,EAAE;QACf,IAAI,GAAG,CAAC,IAAI;YAAE,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;QAC7C,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;KACpB;CACF;;ACFD,IAAM,eAAe,GAAG,UAAC,KAAY,EAAE,IAAI,IAAK,OAAA,UAAC,MAAgB;IAC/D,OAAA,GAAG,CAAC,KAAK,EAAE,MAAM,gBAAC,KAAK,CAAC,QAAQ,EAAE,SAAK,IAAI,GAAE;CAAA,GAAA,CAAA;AAE/C;IAAwC,qBAAc;SAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;QAAd,gCAAc;;IACpD,OAAO,UAAC,KAAY,EAAE,MAAgB,EAAE,IAAI;QAC1C,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,OAAO,GAAG,CAAC,KAAK,EAAE,MAAM,gBAAC,KAAK,CAAC,QAAQ,EAAE,SAAK,IAAI,GAAE,CAAA;SACrD;QAED,IAAM,KAAK,GAAG,WAAW;aACtB,OAAO,EAAE;aACT,GAAG,CAAC,UAAA,UAAU,IAAI,OAAA,UAAU,CAAC,KAAK,CAAC,GAAA,CAAC;aACpC,MAAM,CACL,UAAC,IAAI,EAAE,UAAU,IAAK,OAAA,UAAU,CAAC,IAAI,CAAC,GAAA,EACtC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAC7B,CAAA;QAEH,OAAO,KAAK,CAAC,MAAM,CAAC,CAAA;KACrB,CAAA;CACF;;;;"}