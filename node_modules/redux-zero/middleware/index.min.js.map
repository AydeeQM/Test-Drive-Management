{"version":3,"file":"index.min.js","sources":["../src/utils/set.tsx","../src/middleware/applyMiddleware.ts"],"sourcesContent":["export default function set(store, ret) {\n  if (ret != null) {\n    if (ret.then) return ret.then(store.setState)\n    store.setState(ret)\n  }\n}\n","import Store from \"../interfaces/Store\"\nimport set from \"../utils/set\"\n\nconst finalMiddleware = (store: Store, args) => (action: Function) =>\n  set(store, action(store.getState(), ...args))\n\nexport default function applyMiddleware(...middlewares) {\n  return (store: Store, action: Function, args) => {\n    if (middlewares.length < 1) {\n      return set(store, action(store.getState(), ...args))\n    }\n\n    const chain = middlewares\n      .reverse()\n      .map(middleware => middleware(store))\n      .reduce(\n        (next, middleware) => middleware(next),\n        finalMiddleware(store, args)\n      )\n\n    return chain(action)\n  }\n}\n"],"names":["store","ret","then","setState","finalMiddleware","args","action","set","getState","_i","middlewares","length","reverse","map","middleware","reduce","next","chain"],"mappings":"2MAA4BA,EAAOC,GACjC,GAAW,MAAPA,EAAa,CACf,GAAIA,EAAIC,KAAM,OAAOD,EAAIC,KAAKF,EAAMG,UACpCH,EAAMG,SAASF,ICAnB,IAAMG,EAAkB,SAACJ,EAAcK,GAAS,OAAA,SAACC,GAC/C,OAAAC,EAAIP,EAAOM,gBAAON,EAAMQ,mBAAeH,yBAEzC,eAAwC,aAAAI,mBAAAA,IAAAC,kBACtC,OAAO,SAACV,EAAcM,EAAkBD,GACtC,OAAIK,EAAYC,OAAS,EAChBJ,EAAIP,EAAOM,gBAAON,EAAMQ,mBAAeH,KAGlCK,EACXE,UACAC,IAAI,SAAAC,GAAc,OAAAA,EAAWd,KAC7Be,OACC,SAACC,EAAMF,GAAe,OAAAA,EAAWE,IACjCZ,EAAgBJ,EAAOK,GAGpBY,CAAMX"}